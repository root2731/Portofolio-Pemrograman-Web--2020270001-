<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Toko Elektronik Amanah</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .error {
            color: red;
            font-size: 0.9em;
        }

        .product-item {
            cursor: pointer;
        }
    </style>
</head>

<body class="p-4">
    <div class="text-center mb-4">
        <h1>Toko Elektronik Cepat</h1>
        <p id="tanggal-waktu"></p>
    </div>

    <!-- Display Produk -->
    <div class="row mb-4">
        <div class="col-md-4">
            <h4>Daftar Produk</h4>
            <ul id="produk-list" class="list-group"></ul>
        </div>
        <div class="col-md-8">
            <h4>Detail Produk</h4>
            <div id="detail-produk">
                <p><strong>Nama:</strong> <span id="nama-produk"></span></p>
                <p><strong>Harga:</strong> Rp <span id="harga-produk"></span></p>

                <img id="slideshow-image" src="" width="100%" class="mb-2">
                <br>
                <button class="btn btn-outline-primary btn-sm" onclick="gantiGambar(-1)">Previous</button>
                <button class="btn btn-outline-primary btn-sm" onclick="gantiGambar(1)">Next</button>
            </div>
        </div>
    </div>

    <!-- Form Pemesanan -->
    <div class="mb-4">
        <h4>Form Pemesanan</h4>
        <form onsubmit="return prosesPemesanan()">
            <div class="mb-2">
                <label>Nama Pemesan</label>
                <input type="text" id="nama-pemesan" class="form-control">
                <small id="error-nama" class="error"></small>
            </div>
            <div class="mb-2">
                <label>Jumlah Pesanan</label>
                <input type="number" id="jumlah" class="form-control">
                <small id="error-jumlah" class="error"></small>
            </div>
            <div class="mb-2">
                <label>Kode Promo (opsional)</label>
                <input type="text" id="kode-promo" class="form-control" placeholder="Contoh: DISKON10">
            </div>
            <button type="submit" class="btn btn-success">Pesan Sekarang</button>
        </form>
    </div>

    <div id="hasil-pesanan" class="mt-4"></div>

    <script>
        document.getElementById("tanggal-waktu").innerHTML = new Date().toLocaleString();

        // Data Produk
        var produk = [
            { nama: "Laptop ASUS", harga: 25000000, gambar: ["laptop1.jpg", "laptop2.jpg"] },
            { nama: "Smartphone SAMSUNG", harga: 2500000, gambar: ["samsung1.avif", "samsung2.jpg"] },
            { nama: "TV SAMSUNG", harga: 4000000, gambar: ["tv1.avif", "tv2.avif"] }
        ];

        var currentProduk = 0;
        var currentImageIndex = 0;

        var listProduk = document.getElementById("produk-list");
        for (let i = 0; i < produk.length; i++) {
            var li = document.createElement("li");
            li.className = "list-group-item product-item";
            li.innerText = produk[i].nama;
            li.onclick = function () { tampilkanDetail(i); };
            listProduk.appendChild(li);
        }

        function tampilkanDetail(index) {
            currentProduk = index;
            currentImageIndex = 0;
            document.getElementById("nama-produk").innerText = produk[index].nama;
            document.getElementById("harga-produk").innerText = produk[index].harga;
            tampilkanGambar();
        }

        function tampilkanGambar() {
            var imageElement = document.getElementById("slideshow-image");
            imageElement.src = produk[currentProduk].gambar[currentImageIndex];
        }

        function gantiGambar(arah) {
            currentImageIndex += arah;
            if (currentImageIndex >= produk[currentProduk].gambar.length) currentImageIndex = 0;
            if (currentImageIndex < 0) currentImageIndex = produk[currentProduk].gambar.length - 1;
            tampilkanGambar();
        }

        function prosesPemesanan() {
            let nama = document.getElementById("nama-pemesan").value;
            let jumlah = parseInt(document.getElementById("jumlah").value);
            let promo = document.getElementById("kode-promo").value.toUpperCase();
            let errorNama = document.getElementById("error-nama");
            let errorJumlah = document.getElementById("error-jumlah");
            let hasil = document.getElementById("hasil-pesanan");

            errorNama.innerText = "";
            errorJumlah.innerText = "";

            if (nama == "") {
                errorNama.innerText = "Nama tidak boleh kosong!";
                return false;
            }
            if (isNaN(jumlah) || jumlah <= 0) {
                errorJumlah.innerText = "Jumlah harus lebih dari 0!";
                return false;
            }

            let produkDipilih = produk[currentProduk];
            let subtotal = produkDipilih.harga * jumlah;
            let potongan = 0;

            if (promo === "DISKON10") {
                potongan = subtotal * 0.1;
            }

            let totalAkhir = subtotal - potongan;

            hasil.innerHTML = `
        <div class="alert alert-info mt-3">
          <h5>Ringkasan Pemesanan</h5>
          <p><strong>Nama:</strong> ${nama}</p>
          <p><strong>Produk:</strong> ${produkDipilih.nama}</p>
          <p><strong>Jumlah:</strong> ${jumlah}</p>
          <p><strong>Subtotal:</strong> Rp ${subtotal.toLocaleString()}</p>
          <p><strong>Potongan:</strong> Rp ${potongan.toLocaleString()}</p>
          <p><strong>Total Bayar:</strong> Rp ${totalAkhir.toLocaleString()}</p>
        </div>
      `;
            return false;
        }
    </script>
</body>

</html>